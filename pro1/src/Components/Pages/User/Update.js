import axios from 'axios'
import React, { useEffect } from 'react'
import { useParams,useNavigate } from 'react-router-dom'
import {useForm} from 'react-hook-form';


function Update() {
  const {register,handleSubmit,setValue} = useForm();
  const  {userId} = useParams();

  const navi= useNavigate();

  async function fetchData(){
    const result = await axios.get(`http://localhost:5000/users/${userId}`)
    console.log(result);
    
    setValue('roll',result.data.roll);
    setValue('name',result.data.name);
    setValue('mark',result.data.mark);
  } 

  function saveData(data) {
    axios.put(`http://localhost:5000/users/${userId}`,data)
    navi('user/show');
  }

  useEffect(()=>{
    fetchData();
  },[])

  return (
    <>
      <div className='container'>
        <center><h1><u>STUDENT UPDATE FORM</u></h1></center>
      <form onSubmit={handleSubmit(saveData)} className='mt-5'>
          <label htmlFor='r'><b>Enter ROll:</b></label>
          <input type='number'id='r' className='form-control'{...register('roll')}></input>
          <br></br>
          <label htmlFor='n'><b>Enter Name:</b></label>
          <input type='text' id='n' className='form-control'{...register('name')}></input>
          <br></br>
          <label htmlFor='m'><b>Enter Mark:</b></label>
          <input type="number" id='m' className='form-control'{...register('mark')}></input>
          <br></br>
          <input type="submit" value="update student" className='btn btn-outline-success col-6'></input>
          <input type="reset" value="Reset" className='btn btn-outline-warning col-6'></input>
      </form>
      </div>
    </>
  )
}

export default Update

        























































































































































































































































































































































































































































































































































































































































